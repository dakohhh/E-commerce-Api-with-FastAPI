<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Cart</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css" />
    <!-- Google Fonts Roboto -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" />
    <!-- MDB -->
    <link rel="stylesheet" href="{{ url_for('static', path='css/mdb.min.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', path='css/mdb.min.css') }}" />
    <!-- Custom styles -->
    <!-- <link rel="stylesheet" href="css/style.css" /> -->
</head>
<body>
    <!--Main Navigation-->
<header>
  <style>
    body{
      background-color: #fff;
    }


	.carde{
  border-radius: 8px;
  border: 1px solid #cccccc;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 5px;
  box-sizing: border-box;
  width: 350px;
  height: 425px;
  transition: all linear 200ms;
}
.carde:hover{
  transform: scale(1.1);
  transition: all linear 200ms;
  z-index: 1;
  box-shadow: 1px 1px 10px rgba(0,0,0,.3);
  cursor: pointer;
}

.center {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 80%;
}

.navbar {

position: fixed; /*Set the navbar to fixed position*/
top: 0; /* Position the navbar at the top of the page */
width: 100%; /* Full width */
}



/* Main content */
.main {
margin-top: 100px; /* Add a top margin to avoid content overlay */
}

.rmvbtn{
	background-color: white;
	border: none;
}
  </style>
<!-- Navbar -->

<nav style="" class="navbar navbar-expand-lg navbar-light bg-light">
	<div class="container-fluid">
		<a class="navbar-brand" style="color:black" href="#"><strong>WizShops</strong></a>
		<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav me-auto mb-2 mb-lg-0">
					<li class="nav-item">
					<a class="nav-link active" aria-current="page" href="#">Home</a>
					</li>

					<li class="nav-item">
						<a class="nav-link active" aria-current="page" href="{{ url_for('dashboard_page') }}">Dashbaord</a>
					</li>
				</ul>


				<div class="" style="margin-right: 8px;">
					<!-- Icon -->
					<a class="text-reset me-3" href="{{ url_for('cart_page') }}">
						<i class="fas fa-shopping-cart"></i>
						<span id="cart_lenght" class="badge rounded-pill badge-notification bg-danger">{{ cart_items|length }}</span>
					</a>
				</div>
				<div class="dropdown" style="margin-right: 80px;">
					<button
						class="dropdown-toggle"
						type=""
						id="dropdownMenuButton"
						data-mdb-toggle="dropdown"
						aria-expanded="false"
						style="background-color: white;background: none;border:none"
					>
						<img
						src="https://mdbcdn.b-cdn.net/img/new/avatars/2.webp"
						class="rounded-circle"
						height="30"
						alt="Black and White Portrait of a Man"
						loading="lazy"
						/>
					</button>
					<ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
						<li><a class="dropdown-item" href="{{ url_for('save_products') }}"><i class="fas fa-heart"></i> Saved Items</a></li>
						<li><a class="dropdown-item" href="#">Settings</a></li>
						<li><a class="dropdown-item" href="{{ url_for('logout') }}">Logout</a></li>
					</ul>
				</div>
			</div>
	</div>
</nav>
	<!-- Navbar -->
</header>



<body>
	<div class="container main">
	<br>
	<h1>Welcome, {{ user.fullname }}</h1>
	<br>
	<div class="containers">
		<section class="h-100" style="background-color: white;">
			<div class="container h-100 py-5">
			<div class="row d-flex justify-content-center align-items-center h-100">

				<div class="d-flex justify-content-between align-items-center mb-4">
					<h3 class="">Shopping Cart</h3>
				</div>

				<div class="col-10 __items">
		

				<div class="__exist"></div>
				{% if not cart_items %}
				<h3 style="text-align: center;">Nothing in your cart....</h5>
				{%else%}
				{% for product in cart_items %}
				<div id="Item" class="card rounded-3 mb-4" >
					<div class="card-body p-4">
					<div class="row d-flex justify-content-between align-items-center">
						<div class="col-md-2 col-lg-2 col-xl-2">
						<img
							src="https://mdbcdn.b-cdn.net/img/new/standard/nature/111.webp"
							class="img-fluid rounded-3" alt="Cotton T-shirt">
						</div>
						<div class="col-md-3 col-lg-3 col-xl-3">
						<h5 class="lead fw-normal mb-2">{{ product.product_name }}</h5>
						</div>
						<div class="col-md-3 col-lg-3 col-xl-2 d-flex">
						<button class="btn btn-link px-2"
							onclick="this.parentNode.querySelector('input[type=number]').stepDown()">
						</button>
		
						<input id="form1" min="0" name="quantity" value="2" type="hidden"
							class="form-control form-control-sm" />
		
						<button class="btn btn-link px-2"
							onclick="this.parentNode.querySelector('input[type=number]').stepUp()">
						</button>
						</div>
						<div class="col-md-3 col-lg-2 col-xl-2 offset-lg-1">
						<h5 class="cost mb-0">${{ product.original_price }}</h5>
						</div>
						
						<form class="__form col-md-1 col-lg-1 col-xl-1 text-end" action="/cart?id={{ product.product_id }}">
						<input type="hidden" value="rmvc" name="dert">
						<button id="_form-btn" type="submit" class="rmvbtn text-danger"><i class="fas fa-trash fa-lg"></i></button>
						</form>
					</div>
					</div>
				</div>
				{% endfor %}
				{%endif%}
		
				
		
				{% if not cart_items %}
				<div class="card mb-4">
					<div class="card-body p-4 d-flex flex-row">
					<div class="form-outline flex-fill">
						<input type="text" id="form1" class="form-control form-control-lg" />
						<label class="form-label" for="form1">Discound code</label>
					</div>
					<button id="app-btn" type="button" class="btn btn-outline-warning btn-lg ms-3" disabled>Apply</button>
					</div>
				</div>
		
				
				<div class="card mb-4">
					<div class="card-body p-4 d-flex flex-row">
						<div class="form-outline flex-fill">
							<h5 class="mb-0">Summary</h5>
							<ul class="list-group list-group-flush">
								<li
								class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0">
								Products
								<span class="price">${{ total_price }}</span>
								</li>


								<li class="list-group-item d-flex justify-content-between align-items-center px-0">
									Shipping
									<span>Gratis</span>
									</li>
									<li
									class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 mb-3">
									<div>
										<strong>Total amount</strong>
										<strong>
										<p class="mb-0">(including VAT)</p>
										</strong>
									</div>
									<span class="price"><strong class="price">${{ total_price }}</strong></span>
								</li>
							</ul>
						</div>
						</div>
				</div>

				<div class="card">
					<div class="card-body">
					<button id="check-btn" type="button" class="btn btn-success btn-block btn-lg" disabled><i class="fa fa-credit-card"></i> <strong class="check-price"> Checkout: ${{ total_price }}</strong></button>
					</div>
				</div>




				{%else%}

				<div class="card mb-4">
					<div class="card-body p-4 d-flex flex-row">
					<div class="form-outline flex-fill">
						<input type="text" id="form1" class="form-control form-control-lg" />
						<label class="form-label" for="form1">Discound code</label>
					</div>
					<button id="app-btn" type="button" class="btn btn-outline-warning btn-lg ms-3">Apply</button>
					</div>
				</div>

				<div class="card mb-4">
					<div class="card-body p-4 d-flex flex-row">
						<div class="form-outline flex-fill">
							<h5 class="mb-0">Summary</h5>
							<ul class="list-group list-group-flush">
								<li
								class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0">
								Products
								<span class="price">${{ total_price }}</span>
								</li>


								<li class="list-group-item d-flex justify-content-between align-items-center px-0">
									Shipping
									<span>Gratis</span>
									</li>
									<li
									class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 mb-3">
									<div>
										<strong>Total amount</strong>
										<strong>
										<p class="mb-0">(including VAT)</p>
										</strong>
									</div>
									<span><strong class="price">${{ total_price }}</strong></span>
								</li>
							</ul>
						</div>
						</div>
				</div>

				<div class="card">
					<div class="card-body">
					<input id="total_price" type="hidden" value="{{ total_price }}">
					<input id="order_no" type="hidden" value="{{ order_no }}">
					<button id="check-btn" type="button" class="btn btn-success btn-block btn-lg"><i class="fa fa-credit-card"></i> <strong class="check-price"> Checkout: ${{ total_price }}</strong></button>
					</div>
				</div>
				{% endif %}

				



				</div>
			</div>
			</div>
		</section>		


		
	</div>
</body>
<script src="https://js.stripe.com/v3/"></script>
<script type="text/javascript" src="{{ url_for('static', path='js/mdb.min.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', path='js/script.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', path='js/payment.js') }}"></script>
    <!-- Custom scripts -->

 